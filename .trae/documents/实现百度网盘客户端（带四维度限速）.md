# 实现百度网盘客户端（带四维度限速）

## 概述
基于v115open的实现，创建一个百度网盘客户端，支持qps、qpm、qph、qpt四个维度的限速，达到限速后直接报错。

## 实现步骤

### 1. 创建百度网盘客户端包结构
- 创建 `internal/baidupan` 目录
- 包含以下文件：
  - `client.go`：客户端核心实现
  - `types.go`：类型定义
  - `queue.go`：请求队列和统计
  - `throttle_manager.go`：四维度限流管理器
  - `auth.go`：认证相关
  - `constants.go`：常量定义

### 2. 实现核心类型
- `BaiDuPanClient`：客户端结构体
- `RequestStats`：请求统计（支持四维度计数）
- `ThrottleManager`：限流管理器（支持四维度限速）
- `QueuedRequest`：队列请求
- `RequestResponse`：请求响应

### 3. 实现四维度限速逻辑
- 在 `ThrottleManager` 中添加四个维度的限速阈值配置
- 实现 `CheckRateLimit` 方法，检查是否达到任一维度的限速
- 当达到限速时，标记为限流状态并报错

### 4. 实现请求队列和执行器
- 参考v115open的队列实现
- 在执行请求前检查限速
- 记录请求统计数据

### 5. 实现客户端方法
- 认证方法
- 文件操作方法（列表、上传、下载等）
- 所有方法都需要检查限速

### 6. 集成到系统中
- 在 `main.go` 中添加百度网盘相关路由
- 在 `internal/controllers` 中添加百度网盘相关控制器
- 支持配置限速阈值

## 关键特性
- **四维度限速**：支持qps（每秒）、qpm（每分钟）、qph（每小时）、qpt（每天）四个维度的限速
- **直接报错**：达到限速后，再次请求客户端内的方法直接报错
- **请求统计**：详细记录请求数据，支持查看统计信息
- **队列管理**：有序处理请求，避免突发流量
- **认证管理**：支持令牌刷新和管理

## 技术参考
- 参考 `internal/v115open` 目录下的实现
- 特别是 `throttle_manager.go` 和 `queue.go` 文件
- 使用相同的请求队列和限流机制，但扩展为四维度限速